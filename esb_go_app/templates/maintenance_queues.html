{{define "content"}}
    <a href="/admin">&larr; {{T "Back to main page"}}</a>
    <h1>{{T "RabbitMQ Queue Reconciliation"}}</h1>
    <p>
        {{T "This page compares the channels defined in the application database with the actual queues in RabbitMQ."}}
        {{T "This helps to find 'orphaned' queues (which exist in RabbitMQ but are no longer used in the ESB) for manual cleanup."}}
    </p>

    {{if .ErrorMessage}}
        <div class="status-message error">{{.ErrorMessage}}</div>
    {{else if .QueueRecon}}
        <div class="grid-container">
            <div>
                <h3>{{T "'Orphaned' queues in RabbitMQ"}}</h3>
                <p>{{T "These queues exist in RabbitMQ, but there are no corresponding channels in the ESB database. They can be safely deleted in the RabbitMQ management panel."}}</p>
                {{if .QueueRecon.OrphanedQueues}}
                    <ul class="queue-list">
                        {{range .QueueRecon.OrphanedQueues}}
                            <li>{{.}}</li>
                        {{end}}
                    </ul>
                {{else}}
                    <p>{{T "No orphaned queues found."}}</p>
                {{end}}
            </div>
            <div>
                <h3>{{T "Missing queues in RabbitMQ"}}</h3>
                <p>{{T "For these channels, there is an entry in the ESB database, but the corresponding queue in RabbitMQ was not found. They may need to be created again."}}</p>
                {{if .QueueRecon.MissingQueues}}
                <ul class="queue-list">
                    {{range .QueueRecon.MissingQueues}}
                        <li>{{.}}</li>
                    {{end}}
                </ul>
                {{else}}
                <p>{{T "No missing queues found."}}</p>
                {{end}}
            </div>
        </div>

        <h3 style="margin-top: 2em;">{{T "Matching queues"}}</h3>
        {{if .QueueRecon.MatchingQueues}}
        <ul class="queue-list">
            {{range .QueueRecon.MatchingQueues}}
                <li>{{.}}</li>
            {{end}}
        </ul>
        {{else}}
            <p>{{T "No matching queues found."}}</p>
        {{end}}
    {{end}}
{{end}}