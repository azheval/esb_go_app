{{define "content"}}
    <a href="/admin">&larr; Назад на главную</a>
    <h1>Сверка очередей RabbitMQ</h1>
    <p>
        Эта страница сравнивает каналы, определенные в базе данных приложения, с реальными очередями в RabbitMQ.
        Это помогает найти "осиротевшие" очереди (которые существуют в RabbitMQ, но больше не используются в ESB)
        для ручной очистки.
    </p>

    {{if .ErrorMessage}}
        <div class="status-message error">{{.ErrorMessage}}</div>
    {{else if .QueueRecon}}
        <div class="grid-container">
            <div>
                <h3>"Осиротевшие" очереди в RabbitMQ</h3>
                <p>Эти очереди существуют в RabbitMQ, но для них нет соответствующих каналов в базе данных ESB. Их можно безопасно удалить в панели управления RabbitMQ.</p>
                {{if .QueueRecon.OrphanedQueues}}
                    <ul class="queue-list">
                        {{range .QueueRecon.OrphanedQueues}}
                            <li>{{.}}</li>
                        {{end}}
                    </ul>
                {{else}}
                    <p>Осиротевших очередей не найдено.</p>
                {{end}}
            </div>
            <div>
                <h3>Отсутствующие очереди в RabbitMQ</h3>
                <p>Для этих каналов есть запись в базе данных ESB, но соответствующая очередь в RabbitMQ не найдена. Возможно, их нужно создать заново.</p>
                {{if .QueueRecon.MissingQueues}}
                <ul class="queue-list">
                    {{range .QueueRecon.MissingQueues}}
                        <li>{{.}}</li>
                    {{end}}
                </ul>
                {{else}}
                <p>Отсутствующих очередей не найдено.</p>
                {{end}}
            </div>
        </div>

        <h3 style="margin-top: 2em;">Совпадающие очереди</h3>
        {{if .QueueRecon.MatchingQueues}}
        <ul class="queue-list">
            {{range .QueueRecon.MatchingQueues}}
                <li>{{.}}</li>
            {{end}}
        </ul>
        {{else}}
            <p>Совпадающих очередей не найдено.</p>
        {{end}}
    {{end}}
{{end}}